{
  "hash": "d399e4e84f2dded2930d486e7d8106db",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"10-Logistic Models\"\nsubtitle: \" \"\nauthor: \"Felipe Melo\"\ninstitute: \"Nottingham Trent University - UK\"\nfrom: markdown+emoji\nformat:\n  revealjs:\n    theme: [default, custom.scss]\n    incremental: false\n    chalkboard: true\n    logo: img/ntu_logo.png\n    footer: \"Research Methods & Data Analysis\"\n    slide-number: true\n    transition: slide\n    background-transition: fade\n    #auto-stretch: true\n    title-block-banner: true\n\n---\n\n::: {.cell}\n\n:::\n\n\n\n\n## You should know today:\n\n- Know when to use linear models\n- Understand outputs of LM\n- How to prepare for LM\n- Multiple linear models\n\n\n## Types of variables (review)\n\n::::{.columns}\n:::{.column .fragment}\n**Categorical**\n\n![](https://static-assets.codecademy.com/Courses/Hypothesis-Testing/Intro_to_variable_types_3.png)\n\n:::\n\n:::{.column .fragment}\n**Numerical**\n\n![](https://static-assets.codecademy.com/Courses/Hypothesis-Testing/Intro_to_variable_types_4.png)\n\n:::\n::::\n\n## Back to the toolbox\n\n![](img/toolkit.png){fig-align=\"center\"}\n\n## Numerical vs Categorical\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](10_log_models_files/figure-revealjs/num_num_graph-1.png){width=960}\n:::\n:::\n\n\n\n## Logistic Model\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nm1<-glm(sex~body_mass_g,family= \"binomial\",data = penguins)\nsummary(m1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nglm(formula = sex ~ body_mass_g, family = \"binomial\", data = penguins)\n\nCoefficients:\n              Estimate Std. Error z value Pr(>|z|)    \n(Intercept) -5.1625416  0.7243906  -7.127 1.03e-12 ***\nbody_mass_g  0.0012398  0.0001727   7.177 7.10e-13 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 461.61  on 332  degrees of freedom\nResidual deviance: 396.64  on 331  degrees of freedom\n  (11 observations deleted due to missingness)\nAIC: 400.64\n\nNumber of Fisher Scoring iterations: 4\n```\n\n\n:::\n:::\n\n\n\n## Understanding the outputs\n\n\n\n::: {.cell output-location='default'}\n\n```{.r .cell-code}\nsummary(m1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nglm(formula = sex ~ body_mass_g, family = \"binomial\", data = penguins)\n\nCoefficients:\n              Estimate Std. Error z value Pr(>|z|)    \n(Intercept) -5.1625416  0.7243906  -7.127 1.03e-12 ***\nbody_mass_g  0.0012398  0.0001727   7.177 7.10e-13 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 461.61  on 332  degrees of freedom\nResidual deviance: 396.64  on 331  degrees of freedom\n  (11 observations deleted due to missingness)\nAIC: 400.64\n\nNumber of Fisher Scoring iterations: 4\n```\n\n\n:::\n:::\n\n\n\n## Formula\nCall:\n\nglm(formula = sex ~ body_mass_g, family = \"binomial\", data = penguins)\n\n## Coefficients\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nglm(formula = sex ~ body_mass_g, family = \"binomial\", data = penguins)\n\nCoefficients:\n              Estimate Std. Error z value Pr(>|z|)    \n(Intercept) -5.1625416  0.7243906  -7.127 1.03e-12 ***\nbody_mass_g  0.0012398  0.0001727   7.177 7.10e-13 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 461.61  on 332  degrees of freedom\nResidual deviance: 396.64  on 331  degrees of freedom\n  (11 observations deleted due to missingness)\nAIC: 400.64\n\nNumber of Fisher Scoring iterations: 4\n```\n\n\n:::\n:::\n\n\n\n## Coefficients\n\nsex = -5.1625+0.0012*body mass\n\n- if a penguin weights 0, than it has a negative probability of having a sex (meaningless)\n- **the likelihood of being \"male\" increases by a factor of 0.0012 for each gram (g) of increase in weight.**\n \n## Deviance\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nglm(formula = sex ~ body_mass_g, family = \"binomial\", data = penguins)\n\nCoefficients:\n              Estimate Std. Error z value Pr(>|z|)    \n(Intercept) -5.1625416  0.7243906  -7.127 1.03e-12 ***\nbody_mass_g  0.0012398  0.0001727   7.177 7.10e-13 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 461.61  on 332  degrees of freedom\nResidual deviance: 396.64  on 331  degrees of freedom\n  (11 observations deleted due to missingness)\nAIC: 400.64\n\nNumber of Fisher Scoring iterations: 4\n```\n\n\n:::\n:::\n\n\n\n## Deviance & Pseudo-R²\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnull<-m1$null.deviance/-2\nmodel<-m1$deviance/-2\n(null-model)/null\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.1407346\n```\n\n\n:::\n:::\n\n\n\nThis is the overall effect size of our model\n\n<h2>Not very high<h2>\n\n## Logistic Models for frequency data\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nglm(formula = sex ~ ., family = \"binomial\", data = penguins)\n\nCoefficients:\n                    Estimate Std. Error z value Pr(>|z|)    \n(Intercept)       310.553424 632.100857   0.491  0.62321    \nspeciesChinstrap   -7.624848   1.714564  -4.447 8.70e-06 ***\nspeciesGentoo      -8.766260   2.679151  -3.272  0.00107 ** \nislandDream         0.394305   0.817853   0.482  0.62972    \nislandTorgersen    -0.513102   0.849231  -0.604  0.54571    \nbill_length_mm      0.627014   0.134709   4.655 3.25e-06 ***\nbill_depth_mm       1.613122   0.338498   4.766 1.88e-06 ***\nflipper_length_mm   0.037682   0.051547   0.731  0.46476    \nbody_mass_g         0.005717   0.001090   5.244 1.58e-07 ***\nyear               -0.195493   0.316257  -0.618  0.53648    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 461.61  on 332  degrees of freedom\nResidual deviance: 125.66  on 323  degrees of freedom\n  (11 observations deleted due to missingness)\nAIC: 145.66\n\nNumber of Fisher Scoring iterations: 7\n```\n\n\n:::\n:::\n\n\n\n## Deviance & Pseudo-R²\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnull2<-m2$null.deviance/-2\nmodel2<-m2$deviance/-2\n(null2-model2)/null2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.7277702\n```\n\n\n:::\n:::\n\n\n\nThis is the overall effect size of our model\n\n<h2>Fair enough<h2>\n\n## Final Model\n\n\n::: {.cell}\n\n```{.r .cell-code}\nm3<-glm(sex~bill_length_mm+\n          bill_depth_mm+\n          body_mass_g, \n        family = \"binomial\", \n        data=penguins)\nsummary(m3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nglm(formula = sex ~ bill_length_mm + bill_depth_mm + body_mass_g, \n    family = \"binomial\", data = penguins)\n\nCoefficients:\n                 Estimate Std. Error z value Pr(>|z|)    \n(Intercept)    -6.056e+01  7.081e+00  -8.552  < 2e-16 ***\nbill_length_mm  9.151e-02  4.416e-02   2.072   0.0382 *  \nbill_depth_mm   2.063e+00  2.469e-01   8.356  < 2e-16 ***\nbody_mass_g     5.061e-03  6.348e-04   7.971 1.57e-15 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 461.61  on 332  degrees of freedom\nResidual deviance: 159.89  on 329  degrees of freedom\n  (11 observations deleted due to missingness)\nAIC: 167.89\n\nNumber of Fisher Scoring iterations: 7\n```\n\n\n:::\n:::\n\n\n\n## Deviance & Pseudo-R²\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnull3<-m3$null.deviance/-2\nmodel3<-m3$deviance/-2\n(null3-model3)/null3\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.6536294\n```\n\n\n:::\n:::\n\n\n\nThis is the overall effect size of our model\n\n<h2>Still fair enough<h2>\n\n## Odds ratio\n\n![](https://www.scalestatistics.com/uploads/3/0/4/1/30413390/7973756_orig.jpg)\n\n## Example 1 - Penguin's sex\n\nsex = -5.1625+0.0012*body mass\n\n- if a penguin weights 0, than it has a negative probability of having a sex (meaningless)\n- **the likelihood of being \"male\" increases by a factor of 0.0012 for each gram (g) of increase in weight.**\n\n## Example 1 - Penguin's sex\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>% \n  mutate(size=ifelse(body_mass_g>4202, \"large\", \"small\"))->penguins2\n\n  xtabs(~size+sex, data=penguins2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n       sex\nsize    female male\n  large     53   92\n  small    112   76\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n(53/92)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.576087\n```\n\n\n:::\n\n```{.r .cell-code}\n(112/76)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1.473684\n```\n\n\n:::\n\n```{.r .cell-code}\n(53/92)/(112/76)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.3909161\n```\n\n\n:::\n:::\n\n\n\nCheck [this video](https://www.youtube.com/watch?v=8nm0G-1uJzA) for a great explanation on logs ratio\n\n## Modeling probabilities\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](10_log_models_files/figure-revealjs/unnamed-chunk-14-1.png){width=960}\n:::\n:::\n\n\n\n## Review\n\n- Separate variables into meaningful groups\n- Calculate odds and probabilities\n- Model the likelihood of an \"event\"\n\n## End of Class DA\n\n\n",
    "supporting": [
      "10_log_models_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}