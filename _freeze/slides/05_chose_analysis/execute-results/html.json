{
  "hash": "f7dde23133252e37f2ba277ee4db058b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"5-Choosing the right analysis\"\nsubtitle: \" \"\nauthor: \"Felipe Melo\"\ninstitute: \"Nottingham Trent University - UK\"\nfrom: markdown+emoji\nformat:\n  revealjs:\n    theme: [default, custom.scss]\n    incremental: false\n    chalkboard: true\n    logo: img/ntu_logo.png\n    footer: \"Research Methods & Data Analysis\"\n    slide-number: true\n    transition: slide\n    background-transition: fade\n    #auto-stretch: true\n    title-block-banner: true\n\n---\n\n\n\n## You should know today:\n\n- Identify the nature of variables\n- Foresee the types of analyses\n- Draw graphics of predicted results\n\n\n## Types of variables (review)\n\n::::{.columns}\n:::{.column .fragment}\n**Categorical**\n\n![](https://static-assets.codecademy.com/Courses/Hypothesis-Testing/Intro_to_variable_types_3.png)\n\n:::\n\n:::{.column .fragment}\n**Numerical**\n\n![](https://static-assets.codecademy.com/Courses/Hypothesis-Testing/Intro_to_variable_types_4.png)\n\n:::\n::::\n\n## Back to the toolbox\n\n![](img/toolkit.png){fig-align=\"center\"}\n\n## Check your variables\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(palmerpenguins)\nlibrary(tidyverse)\n\npenguins %>% \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 344\nColumns: 8\n$ species           <fct> Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…\n$ island            <fct> Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…\n$ bill_length_mm    <dbl> 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …\n$ bill_depth_mm     <dbl> 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …\n$ flipper_length_mm <int> 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…\n$ body_mass_g       <int> 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …\n$ sex               <fct> male, female, female, NA, female, male, female, male…\n$ year              <int> 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…\n```\n\n\n:::\n:::\n\n\n\n## Is there an association between \"Species\" and \"Sex\"?\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\npenguins %>% \n  na.omit() %>% \n  ggplot(aes(\n    x= species, \n    color=sex, \n    fill=sex))+\n  geom_bar(position = \"dodge\")-> cat_x_cat\ncat_x_cat\n```\n\n::: {.cell-output-display}\n![](05_chose_analysis_files/figure-revealjs/cat_cat_graph-1.png){width=960}\n:::\n:::\n\n\n\n## How species differ in bill length?\n\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\npenguins %>% \n  na.omit() %>% \n  ggplot(aes(\n    x= species, \n    y= bill_length_mm,\n    color=species, \n    fill=species))+\n  geom_boxplot(alpha=0.7)-> cat_x_num\n\ncat_x_num\n```\n\n::: {.cell-output-display}\n![](05_chose_analysis_files/figure-revealjs/cat_num_graph-1.png){width=960}\n:::\n:::\n\n\n\n## What is the relationship between bill leght and flipper lenght?\n\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\npenguins %>% \n  na.omit() %>% \n  ggplot(aes(\n    x= bill_length_mm, \n    y= flipper_length_mm,\n    color=species))+\n  geom_point()-> num_x_num\n\nnum_x_num\n```\n\n::: {.cell-output-display}\n![](05_chose_analysis_files/figure-revealjs/num_num_graph-1.png){width=960}\n:::\n:::\n\n\n\n## Can body mass predict sex?\n\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\npenguins %>% \n  na.omit() %>% \n  ggplot(aes(\n    x= body_mass_g, \n    y= sex,\n    color=species))+\n  geom_point()-> num_x_cat\n\nnum_x_cat\n```\n\n::: {.cell-output-display}\n![](05_chose_analysis_files/figure-revealjs/num_cat_graph-1.png){width=960}\n:::\n:::\n\n\n\n\n## The four families of statistical tests\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_chose_analysis_files/figure-revealjs/all graphs-1.png){width=960}\n:::\n:::\n\n\n\n## Frequency tests\n\n:::{.columns}\n:::{.column width=\"50%\"}\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_chose_analysis_files/figure-revealjs/freq test-1.png){width=960}\n:::\n:::\n\n\n\n:::\n\n:::{.column width=\"50%\"}\n\n- Chi-square\n- G-tests\n- Contingecy tables\n- Log-linear models\n\n:::\n:::\n\n:::{.fragment}\nPowerful for testing associations between categorical variables\n:::\n\n## Examples of frequency tests\nContingency tables\n\n\n\n|  | Pro-refugees | Anti-refugees | \n|---------|:-----:|:------:|\n| Tories      | 12   |    68 |   \n| Labours     | 55  |   45 |  \n| Socialists   | 65    |    2 | \n| Reform UK | 5  |  87 |\n\n## Let's code it\n\n\n\n::: {.cell output-location='column-fragment'}\n\n```{.r .cell-code}\ntibble(\n  party = c(\"tories\", \"labours\", \"socialists\", \"reform uk\"),\n  pro_refugees = c(12, 55, 65, 5),\n  anti_refugees = c(68, 45, 2, 87)) |> \n  pivot_longer(cols = c(pro_refugees, anti_refugees),\n               names_to = \"stance\",\n               values_to = \"count\") |>  \n  uncount(count) |> \n  mutate(value=rep(1, 339)) |> \n  summarise(n = dplyr::n(), .by = c(party, stance)) -> refugee\n\nrefugee\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 8 × 3\n  party      stance            n\n  <chr>      <chr>         <int>\n1 tories     pro_refugees     12\n2 tories     anti_refugees    68\n3 labours    pro_refugees     55\n4 labours    anti_refugees    45\n5 socialists pro_refugees     65\n6 socialists anti_refugees     2\n7 reform uk  pro_refugees      5\n8 reform uk  anti_refugees    87\n```\n\n\n:::\n:::\n\n\n\n## Let's graph it\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_chose_analysis_files/figure-revealjs/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\n\n## Let's test it\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nrefugee |> \n  pivot_wider(names_from = stance, values_from = n) |> # make it iinto a contingency table\n  select(-party) |> # remove first column\n  chisq.test() # run the test\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tPearson's Chi-squared test\n\ndata:  select(pivot_wider(refugee, names_from = stance, values_from = n),     -party)\nX-squared = 166.17, df = 3, p-value < 2.2e-16\n```\n\n\n:::\n:::\n\n\n\nThe interpretation of frequency tests are quite challenging!\n\n## Mean tests\n:::{.columns}\n:::{.column width=\"50%\"}\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_chose_analysis_files/figure-revealjs/mean test-1.png){width=960}\n:::\n:::\n\n\n\n:::\n\n:::{.column width=\"50%\"}\n\n- T-tests (two levels)\n- Anovas (3+ levels)\n- Non-parametric equivalents\n- Nested and two-way...\n- Post-hoc tests (Tukey HSD, Student, etc.)\n\n:::\n:::\n\n:::{.fragment}\nWidely used for testing differences in means\n:::\n\n## Example of Mean Tests\n:::{.columns}\n:::{.column}\n\nGraph\n\n\n\n::: {.cell output-location='default'}\n\n```{.r .cell-code}\npenguins |> \n  na.omit() |> \n  ggplot(aes(sex,bill_length_mm, color=sex, fill=sex))+\n  geom_jitter(size=2)+\n  geom_boxplot(alpha=0.7)\n```\n\n::: {.cell-output-display}\n![](05_chose_analysis_files/figure-revealjs/mean test2-1.png){width=960}\n:::\n:::\n\n\n:::\n:::{.column}\n\nT-test\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(lm(bill_length_mm~sex, data=penguins))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = bill_length_mm ~ sex, data = penguins)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-11.2548  -4.7548   0.8452   4.3030  15.9030 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  42.0970     0.4003 105.152  < 2e-16 ***\nsexmale       3.7578     0.5636   6.667 1.09e-10 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 5.143 on 331 degrees of freedom\n  (11 observations deleted due to missingness)\nMultiple R-squared:  0.1184,\tAdjusted R-squared:  0.1157 \nF-statistic: 44.45 on 1 and 331 DF,  p-value: 1.094e-10\n```\n\n\n:::\n:::\n\n\n:::\n:::\n\n## Example of Mean Tests\n\n\n\n::: {.cell output-location='column'}\n::: {.cell-output-display}\n![](05_chose_analysis_files/figure-revealjs/mean test3-1.png){width=960}\n:::\n:::\n\n\n\n## Correlations and models\n:::{.columns}\n:::{.column width=\"50%\"}\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_chose_analysis_files/figure-revealjs/corr test-1.png){width=960}\n:::\n:::\n\n\n\n:::\n\n:::{.column width=\"50%\"}\n\n- Correlations\n\n-- many variations\n\n- Linear models\n\n-- many variations\n\n:::\n:::\n\n:::{.fragment}\n\nHighly predictive and powerful but depend on many conditions\n\n:::\n\n## Logistic models\n:::{.columns}\n:::{.column width=\"50%\"}\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_chose_analysis_files/figure-revealjs/log test-1.png){width=960}\n:::\n:::\n\n\n\n:::\n\n:::{.column width=\"50%\"}\n\n- Logistic models\n- Predictive of odds\n- Similar inlogic to frequency tests\n- Similar in calculation to linear models\n\n:::\n:::\n\n:::{.fragment}\n\nHighly predictive and powerful but  can be complex to interpret\n\n:::\n\n## Your turn\n\n![](img/life_exp.png){width=\"70%\" fig-align=\"center\"}\n\nsource: [Our World in Data](https://ourworldindata.org/the-history-of-global-economic-inequality)\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_9171018a\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">02</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">15</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n## Your turn again\n\n<iframe src=\"https://ourworldindata.org/grapher/income-share-distribution-after-tax-lis?showSelectionOnlyInTable=1&tab=chart\" loading=\"lazy\" style=\"width: 100%; height: 600px; border: 0px none;\" allow=\"web-share; clipboard-write\"></iframe>\n\nsource: [Our World in Data](https://ourworldindata.org/economic-inequality)\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_dd818d81\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">02</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">15</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n## It is very important to practice{.center}\n\n## Step 1 - Make a question\n\n- Name the variables in your question\n\n## Step 2 - Make a prediction with a graph\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_7f5fadcd\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">02</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n\n## Step 3 - Identify the \"family\" of tests\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](05_chose_analysis_files/figure-revealjs/all graphs2-1.png){width=960}\n:::\n:::\n\n\n\n## A change in our timetable\n\n![](img/timetable.png)\n\n\n## End of DA class{.center}\n\n",
    "supporting": [
      "05_chose_analysis_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/countdown-0.4.0/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}