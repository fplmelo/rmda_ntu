{
  "hash": "95f2ea1f6edf7e4d2af20fdcaadfdad4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"8-Correlation Tests\"\nsubtitle: \" \"\nauthor: \"Felipe Melo\"\ninstitute: \"Nottingham Trent University - UK\"\nfrom: markdown+emoji\nformat:\n  revealjs:\n    theme: [default, custom.scss]\n    incremental: false\n    chalkboard: true\n    logo: img/ntu_logo.png\n    footer: \"Research Methods & Data Analysis\"\n    slide-number: true\n    transition: slide\n    background-transition: fade\n    #auto-stretch: true\n    title-block-banner: true\n\n---\n\n::: {.cell}\n\n:::\n\n\n\n\n## You should know today:\n\n- Know when to use correlation tests\n- Understand covariances\n- Parametric nd non-parametric versions\n- Pearson's and Spearman's\n- Multiple Correlations\n\n\n## Types of variables (review)\n\n::::{.columns}\n:::{.column .fragment}\n**Categorical**\n\n![](https://static-assets.codecademy.com/Courses/Hypothesis-Testing/Intro_to_variable_types_3.png)\n\n:::\n\n:::{.column .fragment}\n**Numerical**\n\n![](https://static-assets.codecademy.com/Courses/Hypothesis-Testing/Intro_to_variable_types_4.png)\n\n:::\n::::\n\n## Back to the toolbox\n\n![](img/toolkit.png){fig-align=\"center\"}\n\n## Numerical vs Numerical\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](08_corr_tests_files/figure-revealjs/num_num_graph-1.png){width=960}\n:::\n:::\n\n\n\n## Why correlations?\n\n- When you don't expect **effects**\n- When you can't explain **effects**\n- When you want to reduce dimensions of data\n\n## Is it logic to expect an effect?\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](08_corr_tests_files/figure-revealjs/unnamed-chunk-3-1.png){width=960}\n:::\n:::\n\n\n\n## Is it logic to expect an effect?\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](08_corr_tests_files/figure-revealjs/unnamed-chunk-4-1.png){width=960}\n:::\n:::\n\n\n\n## Pearson's correlation\n\n**Assumptions**\n\n- Normal distribution\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncor.test(mtcars$hp, mtcars$mpg)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tPearson's product-moment correlation\n\ndata:  mtcars$hp and mtcars$mpg\nt = -6.7424, df = 30, p-value = 1.788e-07\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n -0.8852686 -0.5860994\nsample estimates:\n       cor \n-0.7761684 \n```\n\n\n:::\n:::\n\n\n\n## Spearmen's correlation\n\n**Assumptions**\n\n- Non-Normal distribution\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncor.test(mtcars$hp, mtcars$mpg, method = \"spearman\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tSpearman's rank correlation rho\n\ndata:  mtcars$hp and mtcars$mpg\nS = 10337, p-value = 5.086e-12\nalternative hypothesis: true rho is not equal to 0\nsample estimates:\n       rho \n-0.8946646 \n```\n\n\n:::\n:::\n\n\n\n\n## Multiple correlations\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars %>% \n  select(mpg:qsec) %>% \n  cor %>% \n  round(.,2)->res\nres\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n       mpg   cyl  disp    hp  drat    wt  qsec\nmpg   1.00 -0.85 -0.85 -0.78  0.68 -0.87  0.42\ncyl  -0.85  1.00  0.90  0.83 -0.70  0.78 -0.59\ndisp -0.85  0.90  1.00  0.79 -0.71  0.89 -0.43\nhp   -0.78  0.83  0.79  1.00 -0.45  0.66 -0.71\ndrat  0.68 -0.70 -0.71 -0.45  1.00 -0.71  0.09\nwt   -0.87  0.78  0.89  0.66 -0.71  1.00 -0.17\nqsec  0.42 -0.59 -0.43 -0.71  0.09 -0.17  1.00\n```\n\n\n:::\n:::\n\n\n\n## Magnitude of correlations\n\n![](https://bookdown.org/yshang/book/images/scatterplot.7.png)\n\n## Visualizing\n\n\n::: {.cell output-location='default'}\n\n```{.r .cell-code}\nif (!require(\"corrplot\")) install.packages(\"corrplot\")\n\ncorrplot(res, type = \"upper\", order = \"hclust\", \n         tl.col = \"black\", tl.srt = 45)\n```\n\n::: {.cell-output-display}\n![](08_corr_tests_files/figure-revealjs/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\n\n\n## Checking p-values\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nif (!require(\"Hmisc\")) install.packages(\"Hmisc\")\nres2<-rcorr(res, type = c(\"pearson\", \"spearman\"))\nres2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n       mpg   cyl  disp    hp  drat    wt  qsec\nmpg   1.00 -0.99 -1.00 -0.97  0.95 -0.99  0.78\ncyl  -0.99  1.00  0.99  0.98 -0.93  0.97 -0.84\ndisp -1.00  0.99  1.00  0.97 -0.96  0.99 -0.79\nhp   -0.97  0.98  0.97  1.00 -0.86  0.92 -0.91\ndrat  0.95 -0.93 -0.96 -0.86  1.00 -0.97  0.60\nwt   -0.99  0.97  0.99  0.92 -0.97  1.00 -0.69\nqsec  0.78 -0.84 -0.79 -0.91  0.60 -0.69  1.00\n\nn= 7 \n\n\nP\n     mpg    cyl    disp   hp     drat   wt     qsec  \nmpg         0.0000 0.0000 0.0004 0.0011 0.0000 0.0377\ncyl  0.0000        0.0000 0.0000 0.0020 0.0004 0.0178\ndisp 0.0000 0.0000        0.0004 0.0007 0.0000 0.0350\nhp   0.0004 0.0000 0.0004        0.0126 0.0033 0.0043\ndrat 0.0011 0.0020 0.0007 0.0126        0.0002 0.1519\nwt   0.0000 0.0004 0.0000 0.0033 0.0002        0.0878\nqsec 0.0377 0.0178 0.0350 0.0043 0.1519 0.0878       \n```\n\n\n:::\n:::\n\n\n\n\n## More ways to evaluate correlations\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- iris[, 1:4] # Numerical variables\ngroups <- iris[, 5] # Factor variable (groups)\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](08_corr_tests_files/figure-revealjs/unnamed-chunk-11-1.png){width=960}\n:::\n:::\n\n\n\n## More ways to evaluate correlations\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](08_corr_tests_files/figure-revealjs/unnamed-chunk-12-1.png){width=960}\n:::\n:::\n\n\n\n## More ways to evaluate correlations\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(psych)\n\ncorPlot(data, cex = 1.2)\n```\n\n::: {.cell-output-display}\n![](08_corr_tests_files/figure-revealjs/unnamed-chunk-13-1.png){width=960}\n:::\n:::\n\n\n\n## More ways to evaluate correlations\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\npar(mfrow = c(2, 3))\n\n# Circles\ncorrplot(cor(data), method = \"circle\",\n        title = \"method = 'circle'\",\n        tl.pos = \"n\", mar = c(2, 1, 3, 1)) \n# Squares \ncorrplot(cor(data), method = \"square\",\n        title = \"method = 'square'\",\n        tl.pos = \"n\", mar = c(2, 1, 3, 1)) \n# Ellipses\ncorrplot(cor(data), method = \"ellipse\",\n         title = \"method = 'ellipse'\",\n         tl.pos = \"n\", mar = c(2, 1, 3, 1)) \n# Correlations\ncorrplot(cor(data), method = \"number\",\n         title = \"method = 'number'\",\n         tl.pos = \"n\", mar = c(2, 1, 3, 1)) \n# Pie charts\ncorrplot(cor(data), method = \"pie\",\n         title = \"method = 'pie'\",\n         tl.pos = \"n\", mar = c(2, 1, 3, 1)) \n# Colors\ncorrplot(cor(data), method = \"color\",\n         title = \"method = 'color'\",\n         tl.pos = \"n\", mar = c(2, 1, 3, 1)) \n```\n\n::: {.cell-output-display}\n![](08_corr_tests_files/figure-revealjs/unnamed-chunk-14-1.png){width=960}\n:::\n:::\n\n\n\n## Using ggplot+GGally\n\n\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code}\nif (!require(\"GGally\")) install.packages(\"GGally\")\nlibrary(GGally)\n\nggpairs(penguins[,c(1,3:7)], ggplot2::aes(colour = species))\n```\n\n::: {.cell-output-display}\n![](08_corr_tests_files/figure-revealjs/unnamed-chunk-15-1.png){width=960}\n:::\n:::\n\n\n\n## Correlations are powerful\n\n- Describe data structure\n- Helps to understand complex phenomena\n\n## Let's examine\n![](img/corr.webp){fig-align=center}\n\n## More examples\n\n![](img/examples_corr.jpg)\n\n## Correlation vs Causation\n\n![](img/causation-correlation.webp)\n\n## Correlation vs Causation\n\n![](img/causation-correlation2.webp)\n\n## r values are not slopes\n\n![](https://bookdown.org/yshang/book/images/scatterplot.10.png)\n\n## Inappropriate for non-linear correlations\n\n![](https://bookdown.org/yshang/book/images/scatterplot.8.png)\n\n\n## Careful with outliers\n\n![](https://bookdown.org/yshang/book/images/scatterplot.9.png)\n\n## End of DA class{.center}\n\n\n\n\n\n\n\n\n\n\n\n",
    "supporting": [
      "08_corr_tests_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}